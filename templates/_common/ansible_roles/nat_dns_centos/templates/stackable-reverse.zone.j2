; BIND db reverse file for {{ domain }}

$TTL 86400

@       IN      SOA     nat.{{ domain }}.      info.stackable.de. (
                        2020063001	; serial number YYMMDDNN
                        28800           ; Refresh
                        7200            ; Retry
                        864000          ; Expire
                        86400           ; Min TTL
			)

@       IN      NS      nat.{{ domain }}.

{% set reverse_dns_domain_of_bastion_host = hostvars[groups.nat[0]]['internal_ip'] | ipaddr('revdns') %}
$ORIGIN {{ reverse_dns_domain_of_bastion_host.split('.')[1:] | join('.') }}

{{ hostvars[groups.nat[0]]['internal_ip'].split('.')[-1] }}  IN      PTR    nat.{{ domain }}.
{% for host in groups['protected'] %}{{ hostvars[host]['ansible_host'].split('.')[-1] }}  IN      PTR       {{ host }}.{{ domain }}.
{% endfor %}